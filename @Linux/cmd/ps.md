КОМАНДА PS В LINUX  
Сначала рассмотрим общий синтаксис команды, здесь все очень просто:  
  
$ ps опции  
  
$ ps опции | grep параметр  
  
Во втором варианте мы используем утилиту grep для того, чтобы отобрать нужные нам процессы по определенному критерию. Теперь рассмотрим опции утилиты. Они делятся на два типа - те, которые идут с дефисом Unix и те, которые используются без дефиса - BSD. Лучше пользоваться только опциями Unix, но мы рассмотрим и одни и другие. Заметьте, что при использовании опций BSD, вывод утилиты будет организован в BSD стиле.  
  
-A, -e, (a) - выбрать все процессы;  
-a - выбрать все процессы, кроме фоновых;  
-d, (g) - выбрать все процессы, даже фоновые, кроме процессов сессий;  
-N - выбрать все процессы кроме указанных;  
-С - выбирать процессы по имени команды;  
-G - выбрать процессы по ID группы;  
-p, (p) - выбрать процессы PID;  
--ppid - выбрать процессы по PID родительского процесса;  
-s - выбрать процессы по ID сессии;  
-t, (t) - выбрать процессы по tty;  
-u, (U) - выбрать процессы пользователя.  
Опции форматирования:  
  
-с - отображать информацию планировщика;  
-f - вывести максимум доступных данных, например, количество потоков;  
-F - аналогично -f, только выводит ещё больше данных;  
-l - длинный формат вывода;  
-j, (j) - вывести процессы в стиле Jobs, минимум информации;  
-M, (Z) - добавить информацию о безопасности;  
-o, (o) - позволяет определить свой формат вывода;  
--sort, (k) - выполнять сортировку по указанной колонке;  
-L, (H)- отображать потоки процессов в колонках LWP и NLWP;  
-m, (m) - вывести потоки после процесса;  
-V, (V) - вывести информацию о версии;  
-H - отображать дерево процессов;  
Теперь, когда вы знаете синтаксис и опции, можно перейти ближе к практике. Чтобы просто посмотреть процессы в текущей оболочке используется такая команда терминала ps:  
  
 ps  
  
  
  
Все процессы, кроме лидеров групп, в том же режиме отображения:  
  
 ps -A  
  
  
  
Все процессы, включая фоновые и лидеры групп:  
  
 ps -d  
  
  
  
Чтобы вывести больше информации о процессах используйте опцию -f:  
  
 ps -f  
  
  
  
При использовании опции -f команда выдает такие колонки:  
  
UID - пользователь, от имени которого запущен процесс;  
PID - идентификатор процесса;  
PPID - идентификатор родительского процесса;  
C - процент времени CPU, используемого процессом;  
STIME - время запуска процесса;  
TTY - терминал, из которого запущен процесс;  
TIME - общее время процессора, затраченное на выполнение процессора;  
CMD - команда запуска процессора;  
LWP - показывает потоки процессора;  
PRI - приоритет процесса.  
Например, также можно вывести подробную информацию обо всех процессах:  
  
 ps -Af  
  
  
  
Больше информации можно получить, использовав опцию -F:  
  
 ps -Fe  
  
  
  
Эта опция добавляет такие колонки:  
  
SZ - это размер процесса в памяти;  
RSS - реальный размер процесса в памяти;  
PSR - ядро процессора, на котором выполняется процесс.  
Если вы хотите получить еще больше информации, используйте вместо -f опцию -l:  
  
 ps -l  
  
  
  
Эта опция добавляет отображение таких колонок:  
  
F - флаги, ассоциированные с этим процессом;  
S - состояние процесса;  
PRI - приоритет процесса в планировщике ядра Linux;  
NI - рекомендованный приоритет процесса, можно менять;  
ADDR - адрес процесса в памяти;  
WCHAN - название функции ядра, из-за которой процесс находится в режиме ожидания.  
Дальше мы можем отобрать все процессы, запущенные от имени определенного пользователя:  
  
 ps -fu root  
  
  
  
С помощью опции -H можно отобразить дерево процессов:  
  
 ps -fHu root  
  
  
  
Если вас интересует информация только об определенном процессе, то вы можете использовать опцию -p и указать PID процесса:  
  
 ps -fp 1  
  
  
  
Через запятую можно указать несколько PID:  
  
 ps -fp 1,2,3  
  
  
  
Опция -С позволяет фильтровать процессы по имени, например, выберем только процессы chrome:  
  
 ps -fC chrome  
  
  
  
Дальше можно использовать опцию -L чтобы отобразить информацию о процессах:  
  
 ps -fL  
  
  
  
Очень интересно то, с помощью опции -o можно настроить форматирование вывода, например, вы можете вывести только pid процесса и команду:  
  
ps -o pid,comm  
  
  
  
Вы можете выбрать такие колонки для отображения: pcpu, pmem, args, comm, cputime, pid, gid, lwp, rss, start, user, vsize, priority. Для удобства просмотра можно отсортировать вывод программы по нужной колонке, например, просмотр процессов, которые используют больше всего памяти:  
  
 ps -Fe --sort rss  
  
  
  
Или по проценту загрузки cpu:  
  
 ps -FA --sort pcpu  
  
  
  
Ещё одна опция - -M, которая позволяет вывести информацию про права безопасности и флаги SELinux для процессов:  
  
 ps -eM  
  
  
  
Общее количество запущенных процессов Linux можно узнать командой:  
  
 ps -e | wc